<html>
<body>
<script>
var require = {
  paths: {
    d3: 'components/d3/d3',
    nvd3 : 'components/nvd3/nv.d3',
  },
};
</script>
<script src="/components/requirejs/require.js"></script>
<script>
    require(['d3'], function(){
        require(['/data.js', 'nvd3'], function(data){
            nv.addGraph(function() {
                console.log(data);
                var chart = nv.models.multiBarChart();

                chart.xAxis
                    .tickFormat(d3.format(',f'));

                chart.yAxis
                    .tickFormat(d3.format(',.1f'));

                d3.select('#chart1 svg')
                    .datum(data)
                  .transition().duration(500).call(chart);

                nv.utils.windowResize(chart.update);

                return chart;
            });

            function exampleData() {
              return stream_layers(3,10+Math.random()*100,.1).map(function(data, i) {
                return {
                  key: 'Stream' + i,
                  values: data
                };
              });
            }
        });
    });
</script>
<div id='chart1'><svg></svg></div>
</body>
